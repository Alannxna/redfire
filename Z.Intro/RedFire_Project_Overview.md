# RedFire 量化交易平台 - 项目总览

## 📋 项目简介

RedFire 是一个现代化的量化交易平台，集成了策略开发、回测、实盘交易、数据管理、风险控制等功能。平台采用微服务架构，支持高并发、高可用的交易环境。

## 🏗️ 项目架构

RedFire 采用分层模块化设计，主要包含以下核心模块：

```
RedFire/
├── backend/           # 后端服务核心
├── frontend/          # 前端用户界面
├── vnpy-core/         # VnPy交易引擎集成
├── shared/            # 共享组件和工具
├── config/            # 配置文件管理
├── data/              # 数据存储和管理
├── deployment/        # 部署和运维
├── tests/             # 测试套件
├── examples/          # 示例代码
├── logs/              # 日志管理
├── docs/              # 项目文档
└── Z.Intro/           # 模块介绍文档
```

## 📁 目录结构详解

### 1. backend/ - 后端服务核心
**功能**: 提供平台的核心后端服务，包括API接口、交易引擎、策略系统等

**主要组件**:
- API层：FastAPI框架，提供RESTful API
- 交易引擎：集成VnPy，支持多品种交易
- 策略系统：策略开发、回测、实盘运行
- 数据管理：市场数据、因子数据管理
- 用户系统：认证、授权、用户管理
- 风险控制：实时风险监控和管理

**技术栈**:
- FastAPI + SQLAlchemy + Pydantic
- PostgreSQL + Redis
- JWT认证 + OAuth2
- Celery + Redis (消息队列)

### 2. frontend/ - 前端用户界面
**功能**: 提供现代化的Web用户界面，支持策略管理、交易监控、数据分析等

**主要功能**:
- 策略管理界面
- 交易监控面板
- 数据分析图表
- 用户管理界面
- 系统配置界面

**技术栈**:
- React 18 + TypeScript
- pnpm (包管理)
- Turbo (构建工具)
- Nginx (反向代理)

### 3. vnpy-core/ - VnPy交易引擎集成
**功能**: 集成VnPy交易引擎，提供策略开发、回测和实盘交易能力

**核心组件**:
- 交易引擎：MainEngine集成
- RPC服务：远程调用接口
- 事件系统：事件驱动架构
- 图表组件：数据可视化
- Alpha策略框架：量化策略开发

**集成特性**:
- 多品种支持（股票、期货、期权）
- 实时行情接入
- 策略回测引擎
- 风险控制模块

### 4. shared/ - 共享组件和工具
**功能**: 提供平台各模块共享的组件、工具函数和类型定义

**主要组件**:
- 监控组件：性能监控、健康检查
- 工具函数：货币格式化、邮件验证、UUID生成
- 类型定义：User、Order、Position、MarketData
- 常量定义：交易常量、系统常量
- 错误处理：自定义异常类
- 响应格式化：统一API响应格式

### 5. config/ - 配置文件管理
**功能**: 管理系统配置，包括环境配置、网关配置、安全配置等

**配置文件**:
- `config.env`: 环境变量配置
- `vt_setting.json`: VnPy交易设置
- `domestic_gateways_example.yaml`: 国内网关配置示例

**配置分类**:
- 环境配置：开发、测试、生产环境
- 网关配置：交易网关参数
- 安全配置：密钥管理、访问控制
- 部署配置：Docker、Kubernetes配置

### 6. data/ - 数据存储和管理
**功能**: 存储和管理各类数据，包括因子数据、研究数据、市场数据等

**数据类型**:
- 因子数据：量化因子数据
- 研究数据：策略研究数据
- 市场数据：tick数据、level2数据、财务数据
- 数据库文件：SQLite、CSV等格式

**数据管理功能**:
- 数据同步：多源数据同步
- 数据验证：数据质量检查
- 数据清洗：异常数据处理
- 数据备份：定期备份策略

### 7. deployment/ - 部署和运维
**功能**: 提供容器化部署、自动化部署和云原生部署解决方案

**部署方案**:
- Docker部署：Dockerfile、Docker Compose
- Kubernetes部署：ConfigMap、Secret、Deployment
- Terraform基础设施：AWS VPC、ECS、RDS
- 部署脚本：环境设置、部署、回滚

**运维特性**:
- 蓝绿部署：零停机部署
- 金丝雀部署：灰度发布
- 自动扩缩容：HPA配置
- 监控告警：Prometheus + Grafana

### 8. tests/ - 测试套件
**功能**: 确保系统质量、稳定性和可靠性

**测试类型**:
- 单元测试：pytest框架
- 集成测试：端到端测试
- 性能测试：压力测试、负载测试
- 国内网关测试：交易网关测试

**测试特性**:
- 测试配置：fixtures配置
- 测试用例：完整的测试覆盖
- 性能基准：API性能测试
- 测试报告：自动化测试报告

### 9. examples/ - 示例代码
**功能**: 提供使用示例和最佳实践

**示例内容**:
- 国内网关使用示例
- 策略开发示例
- 风险管理示例
- 数据同步示例

**示例特性**:
- 完整代码：可直接运行的代码
- 多场景覆盖：不同使用场景
- 错误处理：异常处理示例
- 配置管理：配置示例

### 10. logs/ - 日志管理
**功能**: 收集、存储和管理日志信息

**日志分类**:
- 访问日志：API访问记录
- 审计日志：用户操作记录
- 错误日志：系统错误记录
- 应用日志：应用运行日志

**日志功能**:
- 日志收集：结构化日志收集
- 日志分析：日志分析和监控
- 日志存储：日志存储和检索
- 日志可视化：日志仪表板

### 11. docs/ - 项目文档
**功能**: 存储项目相关文档

**文档内容**:
- API文档
- 用户手册
- 开发文档
- 部署文档

### 12. Z.Intro/ - 模块介绍文档
**功能**: 存储各模块的详细介绍文档

**文档结构**:
- 每个模块对应一个文件夹
- 包含模块的详细说明
- 架构设计文档
- 开发指南文档

## 🚀 快速开始

### 环境要求
- Python 3.8+
- Node.js 16+
- Docker & Docker Compose
- PostgreSQL 12+
- Redis 6+

### 启动方式

#### 1. 简单启动
```bash
# 使用批处理文件
start_simple.bat

# 或使用Python脚本
python start_simple.py
```

#### 2. 完整启动
```bash
# 使用批处理文件
start_redfire.bat

# 或使用Python脚本
python start_redfire.py
```

#### 3. 前端启动
```bash
python start_frontend.py
```

## 🔧 开发环境

### 后端开发
```bash
cd backend
pip install -r requirements.txt
uvicorn main:app --reload
```

### 前端开发
```bash
cd frontend
pnpm install
pnpm dev
```

### 测试运行
```bash
cd tests
pytest
```

## 📊 系统特性

### 高性能
- 异步处理架构
- 内存优化
- 数据库连接池
- 缓存策略

### 高可用
- 负载均衡
- 故障转移
- 健康检查
- 自动恢复

### 可扩展
- 微服务架构
- 水平扩展
- 模块化设计
- 插件系统

### 安全性
- JWT认证
- RBAC权限控制
- 数据加密
- 审计日志

## 🔗 模块间关系

```
┌─────────────────────────────────────────────────────────────┐
│                    RedFire 模块关系图                        │
├─────────────────────────────────────────────────────────────┤
│                                                             │
│  ┌─────────────┐    ┌─────────────┐    ┌─────────────┐     │
│  │  frontend   │◄──►│   backend   │◄──►│  vnpy-core  │     │
│  │   (React)   │    │  (FastAPI)  │    │  (VnPy)     │     │
│  └─────────────┘    └─────────────┘    └─────────────┘     │
│         │                   │                   │           │
│         ▼                   ▼                   ▼           │
│  ┌─────────────┐    ┌─────────────┐    ┌─────────────┐     │
│  │   shared    │    │    data     │    │   config    │     │
│  │ (Components)│    │ (Storage)   │    │ (Settings)  │     │
│  └─────────────┘    └─────────────┘    └─────────────┘     │
│                                                             │
│  ┌─────────────┐    ┌─────────────┐    ┌─────────────┐     │
│  │ deployment  │    │    tests    │    │   examples  │     │
│  │ (DevOps)    │    │ (Testing)   │    │ (Samples)   │     │
│  └─────────────┘    └─────────────┘    └─────────────┘     │
│                                                             │
│  ┌─────────────┐    ┌─────────────┐    ┌─────────────┐     │
│  │    logs     │    │    docs     │    │   Z.Intro   │     │
│  │ (Logging)   │    │ (Document)  │    │ (Intro)     │     │
│  └─────────────┘    └─────────────┘    └─────────────┘     │
│                                                             │
└─────────────────────────────────────────────────────────────┘
```

## 📈 技术栈总览

### 后端技术栈
- **Web框架**: FastAPI
- **数据库**: PostgreSQL, Redis
- **ORM**: SQLAlchemy
- **认证**: JWT, OAuth2
- **消息队列**: Celery + Redis
- **容器化**: Docker, Docker Compose
- **编排**: Kubernetes

### 前端技术栈
- **框架**: React 18
- **语言**: TypeScript
- **包管理**: pnpm
- **构建工具**: Turbo
- **代理服务器**: Nginx

### 交易引擎
- **核心引擎**: VnPy
- **策略框架**: Alpha策略
- **数据接口**: 多源数据接入
- **风控系统**: 实时风控

### 基础设施
- **容器化**: Docker
- **编排**: Kubernetes
- **基础设施**: Terraform
- **监控**: Prometheus + Grafana
- **日志**: ELK Stack

## 🎯 使用场景

### 量化交易
- 策略开发和回测
- 实盘交易执行
- 风险控制管理
- 性能分析

### 数据管理
- 市场数据收集
- 因子数据管理
- 研究数据存储
- 数据质量监控

### 系统运维
- 自动化部署
- 监控告警
- 日志分析
- 性能优化

## 🔮 未来规划

### 短期目标
- 完善文档体系
- 优化性能表现
- 增强安全特性
- 扩展数据源

### 长期目标
- 支持更多交易品种
- 集成AI/ML功能
- 云原生架构升级
- 国际化支持

## 📞 支持与贡献

### 技术支持
- 查看项目文档
- 提交Issue
- 参与社区讨论

### 贡献指南
- Fork项目
- 创建功能分支
- 提交Pull Request
- 代码审查

---

*RedFire 量化交易平台 - 让量化交易更简单、更高效*
